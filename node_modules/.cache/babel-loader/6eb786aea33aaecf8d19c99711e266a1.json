{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useCallback, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router';\nimport { Api } from '../Api';\nimport { logout } from '../localstorage';\nfunction useLogin() {\n  _s();\n  const [loginInfo, setLoginInfo] = useState({\n    loading: true,\n    isLogin: false\n  });\n  const {\n    replace\n  } = useHistory();\n  const checkLogin = useCallback(async () => {\n    const {\n      statusCode\n    } = await Api.getRequest(`/api/user/me`);\n    // console.log({statusCode, data})\n    if (statusCode === 400 || statusCode === 500) {\n      replace('/');\n      logout();\n      return;\n    }\n    setLoginInfo({\n      loading: false,\n      isLogin: true\n    });\n  }, [replace]);\n  useEffect(() => {\n    checkLogin();\n  }, [checkLogin]);\n  return {\n    loginInfo\n  };\n}\n_s(useLogin, \"lh24ktGNKyOxRsLx+8eJOny/ldQ=\", false, function () {\n  return [useHistory];\n});\nexport default useLogin;","map":{"version":3,"names":["useCallback","useEffect","useState","useHistory","Api","logout","useLogin","_s","loginInfo","setLoginInfo","loading","isLogin","replace","checkLogin","statusCode","getRequest"],"sources":["C:/Users/HARISH/OneDrive/Desktop/e-commerce-store-master/e-comerce-frontend/src/utils/hooks/useLogin.js"],"sourcesContent":["import {useCallback, useEffect, useState} from 'react'\nimport {useHistory} from 'react-router'\nimport {Api} from '../Api'\nimport {logout} from '../localstorage'\n\nfunction useLogin() {\n  const [loginInfo, setLoginInfo] = useState({\n    loading: true,\n    isLogin: false,\n  })\n  const {replace} = useHistory()\n  const checkLogin = useCallback(async () => {\n    const {statusCode} = await Api.getRequest(`/api/user/me`)\n    // console.log({statusCode, data})\n    if (statusCode === 400 || statusCode === 500) {\n      replace('/')\n      logout()\n      return\n    }\n    setLoginInfo({loading: false, isLogin: true})\n  }, [replace])\n  useEffect(() => {\n    checkLogin()\n  }, [checkLogin])\n  return {loginInfo}\n}\n\nexport default useLogin\n"],"mappings":";AAAA,SAAQA,WAAW,EAAEC,SAAS,EAAEC,QAAQ,QAAO,OAAO;AACtD,SAAQC,UAAU,QAAO,cAAc;AACvC,SAAQC,GAAG,QAAO,QAAQ;AAC1B,SAAQC,MAAM,QAAO,iBAAiB;AAEtC,SAASC,QAAQA,CAAA,EAAG;EAAAC,EAAA;EAClB,MAAM,CAACC,SAAS,EAAEC,YAAY,CAAC,GAAGP,QAAQ,CAAC;IACzCQ,OAAO,EAAE,IAAI;IACbC,OAAO,EAAE;EACX,CAAC,CAAC;EACF,MAAM;IAACC;EAAO,CAAC,GAAGT,UAAU,EAAE;EAC9B,MAAMU,UAAU,GAAGb,WAAW,CAAC,YAAY;IACzC,MAAM;MAACc;IAAU,CAAC,GAAG,MAAMV,GAAG,CAACW,UAAU,CAAE,cAAa,CAAC;IACzD;IACA,IAAID,UAAU,KAAK,GAAG,IAAIA,UAAU,KAAK,GAAG,EAAE;MAC5CF,OAAO,CAAC,GAAG,CAAC;MACZP,MAAM,EAAE;MACR;IACF;IACAI,YAAY,CAAC;MAACC,OAAO,EAAE,KAAK;MAAEC,OAAO,EAAE;IAAI,CAAC,CAAC;EAC/C,CAAC,EAAE,CAACC,OAAO,CAAC,CAAC;EACbX,SAAS,CAAC,MAAM;IACdY,UAAU,EAAE;EACd,CAAC,EAAE,CAACA,UAAU,CAAC,CAAC;EAChB,OAAO;IAACL;EAAS,CAAC;AACpB;AAACD,EAAA,CApBQD,QAAQ;EAAA,QAKGH,UAAU;AAAA;AAiB9B,eAAeG,QAAQ"},"metadata":{},"sourceType":"module"}